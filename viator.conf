# Viator Configuration File
# Redis-compatible configuration format
#
# Note: Viator is Redis 8.4.0 protocol-compatible.
# Redis is a registered trademark of Redis Ltd.

################################## NETWORK #####################################

# Bind to specific interface(s)
# Use 0.0.0.0 to listen on all interfaces
bind 127.0.0.1

# Accept connections on the specified port
port 6379

# TCP keepalive (seconds, 0 to disable)
tcp-keepalive 300

# Close connection after client is idle for N seconds (0 to disable)
timeout 0

################################## GENERAL #####################################

# Run as a daemon (yes/no)
daemonize no

# PID file location (when daemonized)
# pidfile /var/run/viator/viator.pid

# Log file location (empty for stdout)
# logfile /var/log/viator/viator.log

# Log level: debug, verbose, notice, warning
loglevel notice

# Number of databases (0-15 by default)
databases 16

# Working directory for persistence files
dir /var/lib/viator

################################## SECURITY ####################################

# Require clients to AUTH before processing commands
# requirepass your-strong-password-here

# Maximum number of connected clients
maxclients 10000

################################### MEMORY #####################################

# Maximum memory usage (0 = no limit)
# Examples: 1gb, 512mb, 100mb
# maxmemory 1gb

# Memory eviction policy when maxmemory is reached:
#   noeviction     - Return error on write operations
#   allkeys-lru    - Evict least recently used keys
#   allkeys-lfu    - Evict least frequently used keys
#   allkeys-random - Evict random keys
#   volatile-lru   - Evict LRU keys with expire set
#   volatile-lfu   - Evict LFU keys with expire set
#   volatile-random - Evict random keys with expire set
#   volatile-ttl   - Evict keys with nearest expire time
# maxmemory-policy noeviction

############################## APPEND ONLY MODE ################################

# Enable AOF persistence
appendonly no

# AOF filename
appendfilename "appendonly.aof"

# Fsync policy:
#   always   - Fsync after every write (safest, slowest)
#   everysec - Fsync once per second (recommended)
#   no       - Let the OS handle fsyncing (fastest, least safe)
appendfsync everysec

################################ VDB PERSISTENCE ###############################

# VDB snapshot filename
dbfilename dump.vdb

# Save the DB if both conditions are met:
#   save <seconds> <changes>
# Save after 3600 seconds if at least 1 key changed
save 3600 1
# Save after 300 seconds if at least 100 keys changed
save 300 100
# Save after 60 seconds if at least 10000 keys changed
save 60 10000

# Disable VDB by commenting out all save directives or using:
# save ""

############################# KEYSPACE NOTIFICATIONS ###########################

# Keyspace event notifications
# K     Keyspace events (__keyspace@<db>__)
# E     Keyevent events (__keyevent@<db>__)
# g     Generic commands (DEL, EXPIRE, RENAME, ...)
# $     String commands
# l     List commands
# s     Set commands
# h     Hash commands
# z     Sorted set commands
# x     Expired events
# e     Evicted events
# t     Stream commands
# m     Key-miss events
# A     Alias for "g$lshzxet" (all events)
#
# Example: "KEA" for all events with keyspace and keyevent prefixes
notify-keyspace-events ""

################################## ADVANCED ####################################

# Redis 8.4+ lookahead prefetching depth
lookahead 16

# Include other config files
# include /etc/viator/local.conf
